id: survey
type: Context
public: true
actions:
  onEnter:
    - id: a
      type: SetState
      params:
        url: 
          _url_query: true
    - id: get_transaction
      type: Fetch
      params: get_one_transaction

requests:
  - id: get_one_transaction
    type: MongoDBFindOne
    connectionId: transactions
    properties:
      query:
        _id:
          _url_query: _id
      options:
        projection:
          customer: 0
areas:
  content:
    blocks:
      - id: ant_styles
        type: Box
        # style:
        #   _ref: templates/ant_styles.yaml
        blocks:
          - id: box_blue
            type: Box
            style:
              md:
                borderLeft: '20px solid #000'
              sm:
                borderLeft: '10px solid #000'
            blocks:
              - id: box_green
                type: Box
                style:
                  md:
                    borderLeft: '30px solid #1890ff'
                  sm:
                    borderLeft: '15px solid #1890ff'
                blocks:
                  - id: box_left
                    type: Box
                    layout:
                      span: 12
                    style:
                      minHeight: 100vh
                      position: relative
                      backgroundColor: '#F8F6F4'
                      padding: 30px 0px 40px 0px
                      sm:
                        padding: 30px 0px 50px 0px
                    blocks:
                      - id: welcome_form_box
                        type: Box
                        style:
                          padding: 0px 30px 30px 30px
                          maxWidth: 600px
                        blocks:
                          - id: logo
                            type: Html 
                            style:
                              textAlign: center
                            properties:
                              html: |
                                <img style="max-height: 130px; max-width: 337px; width: 100%; padding: 10px;" src="data:image/png;base64,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" alt="Lowdefy" />
                                <h1 style="margin-top: 20px;">Customer Survey</h1>
                                <h2>Thank you for your Business</h2>

                          - id: welcome_form_title
                            type: Title
                            style:
                              fontWeight: 400
                            properties:
                              level: 4
                              content: 'Please help us improve your experience by answering the following questions:'

                          - id: save_details
                            type: Button
                            layout:
                              span: 24
                              md:
                                span: 24
                            properties:
                              block: true
                              title: Submit
                              size: large
                              hideActionLoading: true
                            actions:
                              onClick:
                                - id: validate_contact
                                  type: Validate
                                - id: link_survey
                                  type: Link
                                  params:
                                    pageId: thank-you
                                    input:
                                      _state: true
                                    urlQuery:
                                      _id:
                                        _state: _id
                                - id: update_progress
                                  type: Mutate
                                  params: update_progress
                      - _ref: branding.yaml

                  - _ref:
                      path: image_right.yaml
                      vars:
                        html: |
                          <img style="height: 100vh; float: right; margin-right: -400px;" src="https://uploads-ssl.webflow.com/5e8da59d7320801b853758d5/5eb83e0579f886473c473ee8_fist_bump.jpg" alt="" />

      
